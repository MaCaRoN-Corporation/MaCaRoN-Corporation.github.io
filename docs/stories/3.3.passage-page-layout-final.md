# Layout Final pour la Page Passage

## Choix Final

- **Mobile (<768px)** : Layout vertical avec technique en haut, timer au milieu, historique en bas
- **PC (≥768px)** : Timer/Progression/Contrôles en haut, technique à gauche, historique à droite

---

## Layout PC (≥768px) - Grid avec Timer/Contrôles en haut

```
┌─────────────────────────────────────────────────────────────────┐
│  TIMER  │  PROGRESSION  │  CONTRÔLES                            │
│  05:23  │   3 / 15      │  [⏸] [⏭]                            │
│         │   ███░░░      │                                        │
├──────────────────────────────┬──────────────────────────────────┤
│                              │                                   │
│  [Compte à rebours - Cercle] │  HISTORIQUE DES TECHNIQUES       │
│                              │  ┌──────┬─────────────────────┐  │
│  [TECHNIQUE ACTUELLE]        │  │ #1   │ Shomen Uchi - Ikkyo │  │
│  Shomen Uchi                 │  │      │ Suwariwaza          │  │
│  Ikkyo                       │  ├──────┼─────────────────────┤  │
│  Tashiwaza                   │  │ #2   │ Yokomen Uchi - Nikyo│  │
│                              │  └──────┴─────────────────────┘  │
│                              │                                   │
└──────────────────────────────┴──────────────────────────────────┘
```

**Structure PC:**
- **Zone supérieure (100%)** : Timer + Progression + Contrôles dans un seul glassmorphisme
- **Colonne gauche (60%)** : Technique actuelle avec compte à rebours intégré
- **Colonne droite (40%)** : Historique (scrollable)

---

## Layout Mobile (<768px) - Vertical Compact

```
┌─────────────────────────────┐
│                             │
│  [TECHNIQUE ACTUELLE]       │
│  [Compte à rebours]         │
│  Shomen Uchi                │
│  Ikkyo                      │
│                             │
├─────────────────────────────┤
│  TIMER  │  PROGRESSION      │
│  05:23  │   3 / 15 ███░░░   │
│         │  [⏸] [⏭]         │
├─────────────────────────────┤
│  HISTORIQUE DES TECHNIQUES  │
│  ┌─────────────────────────┐ │
│  │ #1 Shomen Uchi - Ikkyo  │ │
│  │ #2 Yokomen Uchi - Nikyo │ │
│  └─────────────────────────┘ │
└─────────────────────────────┘
```

**Structure Mobile:**
- Tout empilé verticalement
- Technique actuelle en haut (order: 1)
- Timer + Progression + Contrôles au milieu (order: 2)
- Historique en bas (order: 3)
- Pas de scroll de page, scroll interne sur historique si nécessaire

---

## Structure HTML

```html
<div class="passage-page">
  <!-- Timer + Progression + Contrôles (PC - en haut, Mobile - au milieu) -->
  <div class="passage-header-right">
    <div class="controls-section glass-card">
      <div class="timer-display">{{ formatTime(elapsedTime) }}</div>
      <div class="progress-content">
        <div class="progress-text">{{ currentProgress }} / {{ totalTechniques }}</div>
        <div class="progress-bar-container">
          <div class="progress-bar" [style.width.%]="progressPercentage"></div>
        </div>
      </div>
      <div class="controls-content">
        <button class="control-button">[⏸/▶]</button>
        <button class="control-button restart-button">[⏭]</button>
      </div>
    </div>
  </div>

  <!-- Technique actuelle (PC - gauche, Mobile - haut) -->
  <div class="passage-header-center">
    <div class="current-technique-section glass-card">
      <div class="countdown-circle">
        <span class="countdown-number">{{ countdown }}</span>
      </div>
      <div class="technique-content">
        <div class="technique-attack">{{ currentTechnique.attack }}</div>
        <div class="technique-name">{{ currentTechnique.technique }}</div>
        <div class="technique-position">{{ getPositionLabel(currentTechnique.position) }}</div>
      </div>
    </div>
  </div>

  <!-- Historique (PC - droite, Mobile - bas) -->
  <div class="passage-right-column">
    <!-- Historique PC -->
    <div class="passage-history glass-card">
      <div class="history-header">
        <h3>Historique</h3>
      </div>
      <div class="history-list">
        <!-- Items d'historique -->
      </div>
    </div>
  </div>

  <!-- Historique Mobile -->
  <div class="passage-history-mobile glass-card">
    <div class="history-header">
      <h3>Historique</h3>
    </div>
    <div class="history-list">
      <!-- Items d'historique -->
    </div>
  </div>
</div>
```

---

## Structure CSS (PC)

```scss
.passage-page {
  display: grid;
  grid-template-columns: 1fr 40%; // Technique (60%), Historique (40%)
  grid-template-rows: auto 1fr; // Timer en haut (auto), Technique+Historique en bas (1fr)
  height: 100%;
  overflow: hidden;
  padding: 0.75rem;
  gap: 0.75rem;
}

.passage-header-right {
  grid-column: 1 / -1; // Toute la largeur
  grid-row: 1; // Première ligne (en haut)
}

.passage-header-center {
  grid-column: 1; // Colonne gauche
  grid-row: 2; // Deuxième ligne (sous le timer)
}

.passage-right-column {
  grid-column: 2; // Colonne droite
  grid-row: 2; // Deuxième ligne (sous le timer)
  display: flex;
  flex-direction: column;
}

.controls-section {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  // Timer à gauche, Progression au milieu, Contrôles à droite
}

.passage-history-mobile {
  display: none; // Masqué sur PC
}
```

---

## Structure CSS (Mobile)

```scss
@media (max-width: 767px) {
  .passage-page {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    padding: 0.5rem;
    gap: 0.5rem;
  }

  .passage-header-center {
    order: 1; // Première position (technique en haut)
  }

  .passage-header-right {
    order: 2; // Deuxième position (timer au milieu)
  }

  .passage-history-mobile {
    order: 3; // Troisième position (historique en bas)
    display: block;
    max-height: 40%;
    overflow-y: auto;
  }

  .passage-right-column {
    display: none; // Masqué sur mobile
  }
}
```

---

## Notes d'Implémentation

1. **Grid PC** : Timer/Progression/Contrôles en haut (pleine largeur), Technique à gauche (60%), Historique à droite (40%)
2. **Compte à rebours** : Intégré dans la section technique actuelle
3. **Timer/Progression/Contrôles** : Tous dans un seul glassmorphisme avec séparateurs visuels
4. **Historique** : Zone scrollable avec indicateur de scroll (2 chevrons)
5. **Mobile** : Layout vertical avec technique en haut, timer au milieu, historique en bas
6. **Pas de scroll de page** : `overflow: hidden` sur `.passage-page`, scroll interne sur historique
7. **Glassmorphisme** : Appliqué à toutes les zones (timer/contrôles, technique, historique)
8. **Texte dynamique** : Tailles de police adaptatives avec Container Queries (`cqw`) pour la technique actuelle

---

## Caractéristiques Techniques

- **Container Queries** : Utilisation de `container-type: size` et unités `cqw` pour ajuster dynamiquement les tailles de texte
- **Responsive** : Breakpoints à 768px (tablette/PC) et 1024px (desktop)
- **Scroll indicators** : Indicateurs visuels pour l'historique scrollable
- **Texte sans retour à la ligne** : `white-space: nowrap` sur les textes de technique avec ajustement automatique
